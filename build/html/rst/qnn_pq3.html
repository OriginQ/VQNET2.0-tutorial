

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>使用pyQPanda3量子机器学习模块 &mdash; VQNET v2.15.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/documentation_options.js?v=a149e6fc"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="变分量子线路自动微分模拟" href="vqc.html" />
    <link rel="prev" title="使用pyQPanda2量子机器学习模块" href="qnn.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            VQNET
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">安装介绍</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">VQNet 安装步骤</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">上手实例</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vqc_demo.html">使用自动微分模拟的量子机器学习示例</a></li>
<li class="toctree-l1"><a class="reference internal" href="qml_demo.html">使用pyQPanda2的量子机器学习示例</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">经典神经网络接口介绍</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="QTensor.html">QTensor 模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="nn.html">经典神经网络模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">实用函数</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">使用pyqpanda的量子神经网络接口</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="qnn.html">使用pyQPanda2量子机器学习模块</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">使用pyQPanda3量子机器学习模块</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">量子计算层</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#quantumlayer">QuantumLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.quantumlayer.QuantumLayer"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.QuantumLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quantumlayerv3">QuantumLayerV3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.quantumlayer.QuantumLayerV3"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.QuantumLayerV3</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quantumbatchasyncqcloudlayer">QuantumBatchAsyncQcloudLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.quantumlayer.QuantumBatchAsyncQcloudLayer"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.QuantumBatchAsyncQcloudLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#grad">grad</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.quantumlayer.grad"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.grad()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hybirdvqcqpanda3qvmlayer">HybirdVQCQpanda3QVMLayer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.hybird_vqc_qpanda.HybirdVQCQpanda3QVMLayer"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.hybird_vqc_qpanda.HybirdVQCQpanda3QVMLayer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#qlinear">QLinear</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.qlinear.QLinear"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.qlinear.QLinear</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#qconv">Qconv</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.qcnn.qconv.QConv"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.qcnn.qconv.QConv</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">量子逻辑门</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">基本量子逻辑门</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basicembeddingcircuit">BasicEmbeddingCircuit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.BasicEmbeddingCircuit"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.BasicEmbeddingCircuit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#angleembeddingcircuit">AngleEmbeddingCircuit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.AngleEmbeddingCircuit"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.AngleEmbeddingCircuit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#iqpembeddingcircuits">IQPEmbeddingCircuits</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.IQPEmbeddingCircuits"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.IQPEmbeddingCircuits()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rotcircuit">RotCircuit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.RotCircuit"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.RotCircuit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#crotcircuit">CRotCircuit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.CRotCircuit"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.CRotCircuit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cswapcircuit">CSWAPcircuit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.CSWAPcircuit"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.CSWAPcircuit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#controlled-hadamard">Controlled_Hadamard</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.Controlled_Hadamard"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.Controlled_Hadamard()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ccz">CCZ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.CCZ"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.CCZ()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fermionicsingleexcitation">FermionicSingleExcitation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.FermionicSingleExcitation"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.FermionicSingleExcitation()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fermionicdoubleexcitation">FermionicDoubleExcitation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.FermionicDoubleExcitation"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.FermionicDoubleExcitation()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#uccsd">UCCSD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.UCCSD"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.UCCSD()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quantumpoolingcircuit">QuantumPoolingCircuit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.QuantumPoolingCircuit"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.QuantumPoolingCircuit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id7">常用量子线路组合</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardwareefficientansatz">HardwareEfficientAnsatz</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.ansatz.HardwareEfficientAnsatz"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.ansatz.HardwareEfficientAnsatz</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#basicentanglertemplate">BasicEntanglerTemplate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.BasicEntanglerTemplate"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.BasicEntanglerTemplate</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stronglyentanglingtemplate">StronglyEntanglingTemplate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.template.StronglyEntanglingTemplate"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.template.StronglyEntanglingTemplate</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#complexentangelingtemplate">ComplexEntangelingTemplate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.ComplexEntangelingTemplate"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.ComplexEntangelingTemplate</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quantum-embedding">Quantum_Embedding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.Quantum_Embedding"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.Quantum_Embedding</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">对量子线路进行测量</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#expval">expval</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.expval"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.expval()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#quantummeasure">QuantumMeasure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.QuantumMeasure"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.QuantumMeasure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#probsmeasure">ProbsMeasure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.ProbsMeasure"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.ProbsMeasure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#densitymatrixfromqstate">DensityMatrixFromQstate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.DensityMatrixFromQstate"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.DensityMatrixFromQstate()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vn-entropy">VN_Entropy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.VN_Entropy"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.VN_Entropy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mutal-info">Mutal_Info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.Mutal_Info"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.Mutal_Info()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#purity">Purity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pyvqnet.qnn.pq3.measure.Purity"><code class="docutils literal notranslate"><span class="pre">pyvqnet.qnn.pq3.measure.Purity()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">量子神经网络自动微分模拟接口</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vqc.html">变分量子线路自动微分模拟</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">量子大模型微调</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="llm.html">量子大模型微调示例</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">其他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="torch_api.html">VQNet使用torch进行底层计算</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">VQNet Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VQNET</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">使用pyQPanda3量子机器学习模块</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/rst/qnn_pq3.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pyqpanda3">
<h1>使用pyQPanda3量子机器学习模块<a class="headerlink" href="#pyqpanda3" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>以下接口的量子计算部分使用pyqpanda3 <a class="reference external" href="https://qcloud.originqc.com.cn/document/qpanda-3/index.html">https://qcloud.originqc.com.cn/document/qpanda-3/index.html</a>。</p>
<p>如果您使用了本模块下的QCloud功能,在代码中导入pyqpanda2 或 使用pyvqnet的pyqpanda2相关封装接口会有错误。</p>
</div>
<section id="id1">
<h2>量子计算层<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<section id="quantumlayer">
<h3>QuantumLayer<a class="headerlink" href="#quantumlayer" title="Link to this heading">¶</a></h3>
<p>如您熟悉pyQPanda3语法,可以使用该接口QuantumLayer,自定义pyqpanda3模拟器进行计算。</p>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.quantumlayer.QuantumLayer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.</span></span><span class="sig-name descname"><span class="pre">QuantumLayer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qprog_with_measure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">para_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'parameter_shift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.quantumlayer.QuantumLayer" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>变分量子层的抽象计算模块。对一个参数化的量子线路使用pyQPanda3进行仿真,得到测量结果。该变分量子层继承了VQNet框架的梯度计算模块,可以使用参数漂移法等计算线路参数的梯度,训练变分量子线路模型或将变分量子线路嵌入混合量子和经典模型。</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qprog_with_measure</strong> – 用pyQPand构建的量子线路运行和测量函数。</p></li>
<li><p><strong>para_num</strong> – <cite>int</cite> - 参数个数。</p></li>
<li><p><strong>diff_method</strong> – 求解量子线路参数梯度的方法,“参数位移”或“有限差分”,默认参数偏移。</p></li>
<li><p><strong>delta</strong> – 有限差分计算梯度时的 delta。</p></li>
<li><p><strong>dtype</strong> – 参数的数据类型,defaults:None,使用默认数据类型:kfloat32,代表32位浮点数。</p></li>
<li><p><strong>name</strong> – 这个模块的名字, 默认为””。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>一个可以计算量子线路的模块。</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>qprog_with_measure是pyQPanda中定义的量子线路函数 :<a class="reference external" href="https://qcloud.originqc.com.cn/document/qpanda-3/dc/d12/tutorial_quantum_program.html">https://qcloud.originqc.com.cn/document/qpanda-3/dc/d12/tutorial_quantum_program.html</a>。</p>
<p>此函数必须包含输入和参数两个参数作为函数入参(即使某个参数未实际使用),输出为线路的测量结果或者期望值（需要为np.ndarray或包含数值的列表）,否则无法在QpandaQCircuitVQCLayerLite中正常运行。</p>
<p>量子线路函数 qprog_with_measure (input,param)的使用可参考下面的例子。</p>
<p><cite>input</cite>: 输入一维经典数据。如果没有,输入 None。</p>
<p><cite>param</cite>: 输入一维的变分量子线路的待训练参数。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>该类具有别名 <cite>QuantumLayerV2</cite>, <cite>QpandaQCircuitVQCLayerLite</cite>。</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">ProbsMeasure</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.quantumlayer</span><span class="w"> </span><span class="kn">import</span> <span class="n">QuantumLayer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">QTensor</span><span class="p">,</span><span class="n">ones</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pqctest</span> <span class="p">(</span><span class="nb">input</span><span class="p">,</span><span class="n">param</span><span class="p">):</span>
    <span class="n">num_of_qubits</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="n">m_machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

    <span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_of_qubits</span><span class="p">)</span>

    <span class="n">circuit</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QCircuit</span><span class="p">()</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">qubits</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">qubits</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

    <span class="n">prog</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QProg</span><span class="p">()</span>
    <span class="n">prog</span><span class="o">&lt;&lt;</span><span class="n">circuit</span>

    <span class="n">rlt_prob</span> <span class="o">=</span> <span class="n">ProbsMeasure</span><span class="p">(</span><span class="n">m_machine</span><span class="p">,</span><span class="n">prog</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">rlt_prob</span>
<span class="n">pqc</span> <span class="o">=</span> <span class="n">QuantumLayer</span><span class="p">(</span><span class="n">pqctest</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="c1">#classic data as input</span>
<span class="nb">input</span> <span class="o">=</span> <span class="n">QTensor</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mf">3.0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span> <span class="p">)</span>

<span class="c1">#forward circuits</span>
<span class="n">rlt</span> <span class="o">=</span> <span class="n">pqc</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rlt</span><span class="p">)</span>

<span class="n">grad</span> <span class="o">=</span> <span class="n">ones</span><span class="p">(</span><span class="n">rlt</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span>
<span class="c1">#backward circuits</span>
<span class="n">rlt</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">grad</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pqc</span><span class="o">.</span><span class="n">m_para</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="quantumlayerv3">
<h3>QuantumLayerV3<a class="headerlink" href="#quantumlayerv3" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.quantumlayer.QuantumLayerV3">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.</span></span><span class="sig-name descname"><span class="pre">QuantumLayerV3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin_qprog_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">para_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qvm_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cpu'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauli_str_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initializer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.quantumlayer.QuantumLayerV3" title="Link to this definition">¶</a></dt>
<dd><p>它将参数化的量子电路提交给 本地QPanda3全振幅模拟器中计算,并训练线路中的参数。
它支持批量数据并使用参数移位规则来估计参数的梯度。
对于 CRX、CRY、CRZ,此层使用 <a class="reference external" href="https://iopscience.iop.org/article/10.1088/1367-2630/ac2cb3">https://iopscience.iop.org/article/10.1088/1367-2630/ac2cb3</a> 中的公式,其余逻辑门采用默认的参数漂移法计算梯度。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin_qprog_func</strong> – 由 QPanda 构建的可调用量子电路函数。</p></li>
<li><p><strong>para_num</strong> – <cite>int</cite> - 参数数量；参数是一维的。</p></li>
<li><p><strong>qvm_type</strong> – <cite>str</cite> - 使用pyqpanda3模拟器类型, <cite>cpu</cite> 或 <cite>gpu</cite> 类型,默认 <cite>cpu</cite> .</p></li>
<li><p><strong>pauli_str_dict</strong> – <cite>dict|list</cite> - 表示量子电路中的泡利算子的字典或字典列表。默认值为 None。</p></li>
<li><p><strong>shots</strong> – <cite>int</cite> - 测量镜头数。默认值为 1000。</p></li>
<li><p><strong>initializer</strong> – 参数值的初始化器。默认值为 None。</p></li>
<li><p><strong>dtype</strong> – 参数的数据类型。默认值为 None,即使用默认数据类型。</p></li>
<li><p><strong>name</strong> – 模块名称。默认值为空字符串。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>返回一个QuantumLayerV3类</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>origin_qprog_func 是用户使用 pyQPanda3 定义的量子电路函数:
<a class="reference external" href="https://qcloud.originqc.com.cn/document/qpanda-3/dc/d12/tutorial_quantum_program.html">https://qcloud.originqc.com.cn/document/qpanda-3/dc/d12/tutorial_quantum_program.html</a>。。</p>
<p>此函数必须包含输入和参数两个参数作为函数入参(即使某个参数未实际使用),输出为pyqpanda3.core.QProg类型数据,否则无法在QuantumLayerV3中正常运行。</p>
<p>origin_qprog_func (input,param )</p>
<p><cite>input</cite>:用户定义的数组类输入 1 维经典数据。</p>
<p><cite>param</cite>:array_like 输入用户定义的 1 维量子电路参数。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>该类具有别名 <cite>QpandaQProgVQCLayer</cite> 。</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyvqnet</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.quantumlayer</span><span class="w"> </span><span class="kn">import</span>  <span class="n">QuantumLayerV3</span>


<span class="k">def</span><span class="w"> </span><span class="nf">qfun</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">param</span> <span class="p">):</span>
    <span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">cubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">measure_qubits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="n">m_prog</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QProg</span><span class="p">()</span>
    <span class="n">cir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">input</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="n">qcir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">qcir</span>

    <span class="n">qcir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">qcir</span>

    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">input</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">qcir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">qcir</span>
    <span class="n">m_prog</span><span class="o">&lt;&lt;</span><span class="n">cir</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">ele</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">measure_qubits</span><span class="p">):</span>
        <span class="n">m_prog</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="n">ele</span><span class="p">],</span> <span class="n">cubits</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>  <span class="c1"># pylint: disable=expression-not-assigned</span>
    <span class="k">return</span> <span class="n">m_prog</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.utils.initializer</span><span class="w"> </span><span class="kn">import</span> <span class="n">ones</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">QuantumLayerV3</span><span class="p">(</span><span class="n">qfun</span><span class="p">,</span>
                <span class="mi">4</span><span class="p">,</span>
                <span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
                <span class="n">pauli_str_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                <span class="n">initializer</span><span class="o">=</span><span class="n">ones</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">pyvqnet</span><span class="o">.</span><span class="n">tensor</span><span class="o">.</span><span class="n">QTensor</span><span class="p">(</span>
    <span class="p">[[</span><span class="mf">2.56</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">]],</span>
    <span class="n">requires_grad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">l</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">y</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">m_para</span><span class="o">.</span><span class="n">grad</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">grad</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="quantumbatchasyncqcloudlayer">
<h3>QuantumBatchAsyncQcloudLayer<a class="headerlink" href="#quantumbatchasyncqcloudlayer" title="Link to this heading">¶</a></h3>
<p>当您安装最新版本pyqpanda3,可以使用本接口定义一个变分线路,并提交到originqc的真实芯片上运行。</p>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.quantumlayer.QuantumBatchAsyncQcloudLayer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.</span></span><span class="sig-name descname"><span class="pre">QuantumBatchAsyncQcloudLayer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin_qprog_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qcloud_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">para_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauli_str_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initializer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'parameter_shift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submit_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.quantumlayer.QuantumBatchAsyncQcloudLayer" title="Link to this definition">¶</a></dt>
<dd><p>使用 pyqpanda3 QCLOUD 的 originqc 真实芯片的抽象计算模块。 它提交参数化量子电路到真实芯片并获得测量结果。
如果 diff_method == “random_coordinate_descent” ,该层将随机选择单个参数来计算梯度,其他参数将保持为零。参考:<a class="reference external" href="https://arxiv.org/abs/2311.00088">https://arxiv.org/abs/2311.00088</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>qcloud_token 为您到 <a class="reference external" href="https://qcloud.originqc.com.cn/">https://qcloud.originqc.com.cn/</a> 中申请的api token。
origin_qprog_func 需要返回pypqanda3.core.QProg类型的数据,如果没有设置pauli_str_dict,需要保证该QProg中已经插入了measure。
origin_qprog_func 的形式必须按照如下:</p>
<p>origin_qprog_func(input,param)</p>
<blockquote>
<div><p><cite>input</cite>: 输入1~2维经典数据,二维的情况下,第一个维度为批处理大小。</p>
<p><cite>param</cite>: 输入一维的变分量子线路的待训练参数。</p>
</div></blockquote>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin_qprog_func</strong> – QPanda 构建的变分量子电路函数,必须返回QProg。</p></li>
<li><p><strong>qcloud_token</strong> – <cite>str</cite> - 量子机的类型或用于执行的云令牌。</p></li>
<li><p><strong>para_num</strong> – <cite>int</cite> - 参数数量,参数是大小为[para_num]的QTensor。</p></li>
<li><p><strong>pauli_str_dict</strong> – <cite>dict|list</cite> - 表示量子电路中泡利运算符的字典或字典列表。 默认为“无”,则进行测量操作,如果输入泡利算符的字典,则会计算单个期望或者多个期望。</p></li>
<li><p><strong>shot</strong> – <cite>int</cite> - 测量次数。 默认值为 1000。</p></li>
<li><p><strong>initializer</strong> – 参数值的初始化器。 默认为“无”,使用0~2*pi正态分布。</p></li>
<li><p><strong>dtype</strong> – 参数的数据类型。 默认值为 None,即使用默认数据类型pyvqnet.kfloat32。</p></li>
<li><p><strong>name</strong> – 模块的名称。 默认为空字符串。</p></li>
<li><p><strong>diff_method</strong> – 梯度计算的微分方法。 默认为“parameter_shift”,”random_coordinate_descent”。</p></li>
<li><p><strong>submit_kwargs</strong> – 用于提交量子电路的附加关键字参数,默认:{“chip_id”:”origin_wukong”,”is_amend”:True,”is_mapping”:True,”is_optimization”:True,”compile_level”:3,”default_task_group_size”:200,”test_qcloud_fake”:False},当设置test_qcloud_fake为True则本地CPUQVM模拟。</p></li>
<li><p><strong>query_kwargs</strong> – 用于查询量子结果的附加关键字参数,默认:{“timeout”:2,”print_query_info”:True,”sub_circuits_split_size”:1}。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>一个可以计算量子电路的模块。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyvqnet</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.quantumlayer</span><span class="w"> </span><span class="kn">import</span> <span class="n">QuantumBatchAsyncQcloudLayer</span>

<span class="k">def</span><span class="w"> </span><span class="nf">qfun</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span><span class="n">param</span><span class="p">):</span>
    <span class="n">measure_qubits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">cir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QCircuit</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cir</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">m_prog</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QProg</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>


    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">ele</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">measure_qubits</span><span class="p">):</span>
        <span class="n">m_prog</span> <span class="o">&lt;&lt;</span> <span class="n">pq</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="n">ele</span><span class="p">],</span> <span class="n">m_qlist</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>  <span class="c1"># pylint: disable=expression-not-assigned</span>
    <span class="k">return</span> <span class="n">m_prog</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">QuantumBatchAsyncQcloudLayer</span><span class="p">(</span><span class="n">qfun</span><span class="p">,</span>
                <span class="s2">&quot;3047DE8A59764BEDAC9C3282093B16AF1&quot;</span><span class="p">,</span>
                <span class="mi">2</span><span class="p">,</span>

                <span class="n">pauli_str_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">shots</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="n">initializer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">diff_method</span><span class="o">=</span><span class="s2">&quot;parameter_shift&quot;</span><span class="p">,</span>
                <span class="n">submit_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;test_qcloud_fake&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span>
                <span class="n">query_kwargs</span><span class="o">=</span><span class="p">{})</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">pyvqnet</span><span class="o">.</span><span class="n">tensor</span><span class="o">.</span><span class="n">QTensor</span><span class="p">([[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">]],</span><span class="n">requires_grad</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">l</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">y</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">m_para</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">qfun2</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span><span class="n">param</span> <span class="p">):</span>

    <span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">cir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QCircuit</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">H</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">m_prog</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QProg</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>



    <span class="k">return</span> <span class="n">m_prog</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">QuantumBatchAsyncQcloudLayer</span><span class="p">(</span><span class="n">qfun2</span><span class="p">,</span>
        <span class="s2">&quot;3047DE8A59764BEDAC9C3282093B16AF&quot;</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">,</span>

        <span class="n">pauli_str_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Z0 X1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="s1">&#39;Y2&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">0.543</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">:</span><span class="mi">3333</span><span class="p">},</span>
        <span class="n">shots</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">initializer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">diff_method</span><span class="o">=</span><span class="s2">&quot;parameter_shift&quot;</span><span class="p">,</span>
        <span class="n">submit_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;test_qcloud_fake&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span>
        <span class="n">query_kwargs</span><span class="o">=</span><span class="p">{})</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">pyvqnet</span><span class="o">.</span><span class="n">tensor</span><span class="o">.</span><span class="n">QTensor</span><span class="p">([[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],[</span><span class="mf">0.56</span><span class="p">,</span><span class="mf">1.2</span><span class="p">]],</span><span class="n">requires_grad</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">l</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">y</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">m_para</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="grad">
<h3>grad<a class="headerlink" href="#grad" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.quantumlayer.grad">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.quantumlayer.</span></span><span class="sig-name descname"><span class="pre">grad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantum_prog_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_params</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.quantumlayer.grad" title="Link to this definition">¶</a></dt>
<dd><p>grad 函数提供了一种对用户设计的含参量子线路参数的梯度进行计算的接口。
用户可按照如下例子,使用pyqpanda设计线路运行函数 <code class="docutils literal notranslate"><span class="pre">quantum_prog_func</span></code> ,并作为参数送入grad函数。
grad函数的第二个参数则是想要计算量子逻辑门参数梯度的坐标。
返回值的形状为  [num of parameters,num of output]。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>quantum_prog_func</strong> – pyqpanda设计的量子线路运行函数。</p></li>
<li><p><strong>input_params</strong> – 待求梯度的参数。</p></li>
<li><p><strong>*args</strong> – 其他输入到quantum_prog_func函数的参数。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>参数的梯度</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">grad</span><span class="p">,</span> <span class="n">ProbsMeasure</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>

<span class="k">def</span><span class="w"> </span><span class="nf">pqctest</span><span class="p">(</span><span class="n">param</span><span class="p">):</span>
    <span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

    <span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">circuit</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">circuit</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RX</span><span class="p">(</span><span class="n">qubits</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">param</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="n">prog</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QProg</span><span class="p">()</span>
    <span class="n">prog</span><span class="o">&lt;&lt;</span><span class="n">circuit</span>

    <span class="n">EXP</span> <span class="o">=</span> <span class="n">ProbsMeasure</span><span class="p">(</span><span class="n">machine</span><span class="p">,</span><span class="n">prog</span><span class="p">,[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">EXP</span>


<span class="n">g</span> <span class="o">=</span> <span class="n">grad</span><span class="p">(</span><span class="n">pqctest</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">pqctest</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="hybirdvqcqpanda3qvmlayer">
<h3>HybirdVQCQpanda3QVMLayer<a class="headerlink" href="#hybirdvqcqpanda3qvmlayer" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.hybird_vqc_qpanda.HybirdVQCQpanda3QVMLayer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.hybird_vqc_qpanda.</span></span><span class="sig-name descname"><span class="pre">HybirdVQCQpanda3QVMLayer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vqc_module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="nn.html#pyvqnet.nn.pyvqnet.nn.module.Module" title="pyvqnet.nn.pyvqnet.nn.module.Module"><span class="pre">Module</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">qcloud_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauli_str_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submit_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.hybird_vqc_qpanda.HybirdVQCQpanda3QVMLayer" title="Link to this definition">¶</a></dt>
<dd><p>混合 vqc 和 qpanda3 模拟计算。该层将用户 <cite>forward</cite> 函数定义的VQNet编写的量子线路计算转化为QPanda OriginIR,在QPanda3本地虚拟机或者云端服务上进行前向运行,并在基于自动微分计算线路参数梯度,降低了使用参数漂移法计算的时间复杂度。
其中 <code class="docutils literal notranslate"><span class="pre">vqc_module</span></code> 为用户自定义的量子变分线路模型,其中的QMachine设置 <code class="docutils literal notranslate"><span class="pre">save_ir=True</span></code> 。
有别名 <code class="docutils literal notranslate"><span class="pre">HybirdVQCQpandaQVMLayer</span></code>。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vqc_module</strong> – 带有 forward() 的 vqc_module。</p></li>
<li><p><strong>qcloud_token</strong> – <cite>str</cite> - 量子机器的类型或用于执行的云令牌。</p></li>
<li><p><strong>pauli_str_dict</strong> – <cite>dict|list</cite> - 表示量子电路中泡利算子的字典或字典列表。默认值为 None。</p></li>
<li><p><strong>shots</strong> – <cite>int</cite> - 量子线路测量次数。默认值为 1000。</p></li>
<li><p><strong>name</strong> – 模块名称。默认值为空字符串。</p></li>
<li><p><strong>submit_kwargs</strong> – 提交量子电路的附加关键字参数,默认值:
{“chip_id”:”origin_wukong”,
“is_amend”:True,”is_mapping”:True,
“is_optimization”:True,
“default_task_group_size”:200,
“test_qcloud_fake”:True}。</p></li>
<li><p><strong>query_kwargs</strong> – 查询量子结果的附加关键字参数,默认值:{“timeout”:2,”print_query_info”:True,”sub_circuits_split_size”:1}。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>可以计算量子电路的模块。</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>pauli_str_dict 不能为 None,并且应与 vqc_module 测量函数中的 obs 相同。
vqc_module 应具有 QMachine 类型的属性,QMachine 应设置 save_ir=True</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.vqc</span><span class="w">  </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w">  </span><span class="kn">import</span> <span class="n">HybirdVQCQpanda3QVMLayer</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyvqnet</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.nn</span><span class="w"> </span><span class="kn">import</span> <span class="n">Module</span><span class="p">,</span><span class="n">Linear</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Hybird</span><span class="p">(</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cl1</span> <span class="o">=</span> <span class="n">Linear</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ql</span> <span class="o">=</span> <span class="n">QModel</span><span class="p">(</span><span class="n">num_wires</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">pyvqnet</span><span class="o">.</span><span class="n">kcomplex64</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cl2</span> <span class="o">=</span> <span class="n">Linear</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cl1</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ql</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cl2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

<span class="k">class</span><span class="w"> </span><span class="nc">QModel</span><span class="p">(</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_wires</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span><span class="n">grad_mode</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">QModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_num_wires</span> <span class="o">=</span> <span class="n">num_wires</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dtype</span> <span class="o">=</span> <span class="n">dtype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qm</span> <span class="o">=</span> <span class="n">QMachine</span><span class="p">(</span><span class="n">num_wires</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span><span class="n">grad_mode</span><span class="o">=</span><span class="n">grad_mode</span><span class="p">,</span><span class="n">save_ir</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx_layer</span> <span class="o">=</span> <span class="n">RX</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trainable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wires</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry_layer</span> <span class="o">=</span> <span class="n">RY</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trainable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wires</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rz_layer</span> <span class="o">=</span> <span class="n">RZ</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trainable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wires</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u1</span> <span class="o">=</span> <span class="n">U1</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u2</span> <span class="o">=</span> <span class="n">U2</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u3</span> <span class="o">=</span> <span class="n">U3</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">S</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">Y1</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z1</span> <span class="o">=</span> <span class="n">Z1</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">PauliX</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">PauliY</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">PauliZ</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">swap</span> <span class="o">=</span> <span class="n">SWAP</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cz</span> <span class="o">=</span> <span class="n">CZ</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cr</span> <span class="o">=</span> <span class="n">CR</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rxx</span> <span class="o">=</span> <span class="n">RXX</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rzz</span> <span class="o">=</span> <span class="n">RYY</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ryy</span> <span class="o">=</span> <span class="n">RZZ</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rzx</span> <span class="o">=</span> <span class="n">RZX</span><span class="p">(</span><span class="n">has_params</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">trainable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toffoli</span> <span class="o">=</span> <span class="n">Toffoli</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">use_dagger</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span><span class="n">Hadamard</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">iSWAP</span> <span class="o">=</span> <span class="n">iSWAP</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span><span class="kc">False</span><span class="p">,</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tlayer</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnot</span> <span class="o">=</span> <span class="n">CNOT</span><span class="p">(</span><span class="n">wires</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">measure</span> <span class="o">=</span> <span class="n">MeasureAll</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Z0&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;Y3&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">reset_states</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">swap</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z1</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ryy</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rxx</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rzz</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rzx</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">,</span><span class="n">params</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cr</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u1</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u2</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u3</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rx_layer</span><span class="p">(</span><span class="n">params</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iSWAP</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ry_layer</span><span class="p">(</span><span class="n">params</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tlayer</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rz_layer</span><span class="p">(</span><span class="n">params</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toffoli</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>
        <span class="n">rlt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">q_machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">rlt</span>


<span class="n">input_x</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">QTensor</span><span class="p">([[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]])</span>

<span class="n">input_x</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">broadcast_to</span><span class="p">(</span><span class="n">input_x</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="n">input_x</span><span class="o">.</span><span class="n">requires_grad</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">qunatum_model</span> <span class="o">=</span> <span class="n">QModel</span><span class="p">(</span><span class="n">num_wires</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">pyvqnet</span><span class="o">.</span><span class="n">kcomplex64</span><span class="p">)</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">HybirdVQCQpanda3QVMLayer</span><span class="p">(</span><span class="n">qunatum_model</span><span class="p">,</span>
                        <span class="s2">&quot;3047DE8A59764BEDAC9C3282093B16AF1&quot;</span><span class="p">,</span>

            <span class="n">pauli_str_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Z0&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;Y3&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
            <span class="n">shots</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">submit_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;test_qcloud_fake&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span>
            <span class="n">query_kwargs</span><span class="o">=</span><span class="p">{})</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">l</span><span class="p">(</span><span class="n">input_x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">y</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">input_x</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="qlinear">
<h3>QLinear<a class="headerlink" href="#qlinear" title="Link to this heading">¶</a></h3>
<p>QLinear 实现了一种量子全连接算法。首先将数据编码到量子态,然后通过量子线路进行演化操作和测量得到最终的全连接结果。</p>
<img alt="../_images/qlinear_cir.png" src="../_images/qlinear_cir.png" />
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.qlinear.QLinear">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.qlinear.</span></span><span class="sig-name descname"><span class="pre">QLinear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">machine:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">&quot;CPU&quot;)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.qlinear.QLinear" title="Link to this definition">¶</a></dt>
<dd><p>量子全连接模块。全连接模块的输入为形状（输入通道、输出通道）。请注意,该层不带变分量子参数。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_channels</strong> – <cite>int</cite> - 输入通道数。</p></li>
<li><p><strong>output_channels</strong> – <cite>int</cite> - 输出通道数。</p></li>
<li><p><strong>machine</strong> – <cite>str</cite> - 使用的虚拟机,默认使用CPU模拟。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子全连接层。</p>
</dd>
</dl>
<p>Exmaple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">QTensor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.qlinear</span><span class="w"> </span><span class="kn">import</span> <span class="n">QLinear</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.37454012</span><span class="p">,</span> <span class="mf">0.95071431</span><span class="p">,</span> <span class="mf">0.73199394</span><span class="p">,</span> <span class="mf">0.59865848</span><span class="p">,</span> <span class="mf">0.15601864</span><span class="p">,</span> <span class="mf">0.15599452</span><span class="p">],</span>
<span class="p">[</span><span class="mf">1.37454012</span><span class="p">,</span> <span class="mf">0.95071431</span><span class="p">,</span> <span class="mf">0.73199394</span><span class="p">,</span> <span class="mf">0.59865848</span><span class="p">,</span> <span class="mf">0.15601864</span><span class="p">,</span> <span class="mf">0.15599452</span><span class="p">],</span>
<span class="p">[</span><span class="mf">1.37454012</span><span class="p">,</span> <span class="mf">1.95071431</span><span class="p">,</span> <span class="mf">0.73199394</span><span class="p">,</span> <span class="mf">0.59865848</span><span class="p">,</span> <span class="mf">0.15601864</span><span class="p">,</span> <span class="mf">0.15599452</span><span class="p">],</span>
<span class="p">[</span><span class="mf">1.37454012</span><span class="p">,</span> <span class="mf">1.95071431</span><span class="p">,</span> <span class="mf">1.73199394</span><span class="p">,</span> <span class="mf">1.59865848</span><span class="p">,</span> <span class="mf">0.15601864</span><span class="p">,</span> <span class="mf">0.15599452</span><span class="p">]]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">QLinear</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">input</span> <span class="o">=</span> <span class="n">QTensor</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">requires_grad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">m</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<span class="n">output</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

<span class="c1">#[</span>
<span class="c1">#[0.0568473, 0.1264389],</span>
<span class="c1">#[0.1524036, 0.1264389],</span>
<span class="c1">#[0.1524036, 0.1442845],</span>
<span class="c1">#[0.1524036, 0.1442845]</span>
<span class="c1">#]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="qconv">
<h3>Qconv<a class="headerlink" href="#qconv" title="Link to this heading">¶</a></h3>
<p>Qconv是一种量子卷积算法接口。
量子卷积操作采用量子线路对经典数据进行卷积操作,其无需计算乘法和加法操作,只需将数据编码到量子态,然后通过量子线路进行演化操作和测量得到最终的卷积结果。
根据卷积核的范围中的输入数据数量申请相同数量的量子比特,然后构建量子线路进行计算。</p>
<img alt="../_images/qcnn.png" src="../_images/qcnn.png" />
<p>其量子线路由每个qubit上首先插入 <span class="math notranslate nohighlight">\(RY\)</span> , <span class="math notranslate nohighlight">\(RZ\)</span> 门进行编码,接着在任意两个qubit上使用 <span class="math notranslate nohighlight">\(Z\)</span> 以及 <span class="math notranslate nohighlight">\(U3\)</span> 进行信息纠缠和交换。下图为4qubits的例子</p>
<img alt="../_images/qcnn_cir.png" src="../_images/qcnn_cir.png" />
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.qcnn.qconv.QConv">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.qcnn.qconv.</span></span><span class="sig-name descname"><span class="pre">QConv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantum_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_initializer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">normal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">machine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'CPU'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.qcnn.qconv.QConv" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>量子卷积模块。用量子线路取代Conv2D内核,conv模块的输入为形状（批次大小、输入通道、高度、宽度） <a class="reference external" href="https://arxiv.org/abs/2012.12177">Samuel et al. (2020)</a> 。</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_channels</strong> – <cite>int</cite> - 输入通道数。</p></li>
<li><p><strong>output_channels</strong> – <cite>int</cite> - 输出通道数。</p></li>
<li><p><strong>quantum_number</strong> – <cite>int</cite> - 单个内核的大小。</p></li>
<li><p><strong>stride</strong> – <cite>tuple</cite> - 步长,默认为（1,1）。</p></li>
<li><p><strong>padding</strong> – <cite>tuple</cite> - 填充,默认为（0,0）。</p></li>
<li><p><strong>kernel_initializer</strong> – <cite>callable</cite> - 默认为正态分布。</p></li>
<li><p><strong>machine</strong> – <cite>str</cite> - 使用的虚拟机,默认使用CPU模拟。</p></li>
<li><p><strong>dtype</strong> – 参数的数据类型,defaults:None,使用默认数据类型:kfloat32,代表32位浮点数。</p></li>
<li><p><strong>name</strong> – 这个模块的名字, 默认为””。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子卷积层。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">tensor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.qcnn.qconv</span><span class="w"> </span><span class="kn">import</span> <span class="n">QConv</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">QConv</span><span class="p">(</span><span class="n">input_channels</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">output_channels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">quantum_number</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">stride</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">layer</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># [</span>
<span class="c1"># [[[-0.0889078, -0.0889078],</span>
<span class="c1">#  [-0.0889078, -0.0889078]],</span>
<span class="c1"># [[0.7992646, 0.7992646],</span>
<span class="c1">#  [0.7992646, 0.7992646]]]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="id2">
<h2>量子逻辑门<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>处理量子比特的方式就是量子逻辑门。 使用量子逻辑门,我们有意识的使量子态发生演化。量子逻辑门是构成量子算法的基础。</p>
<section id="id3">
<h3>基本量子逻辑门<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>在VQNet中,我们使用本源量子自研的 <a class="reference external" href="https://qcloud.originqc.com.cn/document/qpanda-3/index.html">pyqpanda3</a> 的各个逻辑门搭建量子线路,进行量子模拟。
当前pyQPanda支持的逻辑门可参考pyQPanda3 <a class="reference external" href="https://qcloud.originqc.com.cn/document/qpanda-3/da/dd5/tutorial_quantum_gate.html">量子逻辑门</a> 部分的定义。
此外VQNet还封装了部分在量子机器学习中常用的量子逻辑门组合:</p>
</section>
<section id="basicembeddingcircuit">
<h3>BasicEmbeddingCircuit<a class="headerlink" href="#basicembeddingcircuit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.BasicEmbeddingCircuit">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">BasicEmbeddingCircuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_feat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.BasicEmbeddingCircuit" title="Link to this definition">¶</a></dt>
<dd><p>将n个二进制特征编码为n个量子比特的基态。</p>
<p>例如, 对于 <code class="docutils literal notranslate"><span class="pre">features=([0,</span> <span class="pre">1,</span> <span class="pre">1])</span></code>, 在量子系统下其基态为 <span class="math notranslate nohighlight">\(|011 \rangle\)</span>。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_feat</strong> – <code class="docutils literal notranslate"><span class="pre">(n)</span></code> 大小的二进制输入。</p></li>
<li><p><strong>qlist</strong> – 构建该模板线路量子比特。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子线路。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.template</span><span class="w"> </span><span class="kn">import</span> <span class="n">BasicEmbeddingCircuit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet</span><span class="w"> </span><span class="kn">import</span> <span class="n">tensor</span>
<span class="n">input_feat</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">QTensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="n">qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">=</span> <span class="n">BasicEmbeddingCircuit</span><span class="p">(</span><span class="n">input_feat</span><span class="p">,</span><span class="n">qlist</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="angleembeddingcircuit">
<h3>AngleEmbeddingCircuit<a class="headerlink" href="#angleembeddingcircuit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.AngleEmbeddingCircuit">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">AngleEmbeddingCircuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_feat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'X'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.AngleEmbeddingCircuit" title="Link to this definition">¶</a></dt>
<dd><p>将 <span class="math notranslate nohighlight">\(N\)</span> 特征编码到 <span class="math notranslate nohighlight">\(n\)</span> 量子比特的旋转角度中, 其中 <span class="math notranslate nohighlight">\(N \leq n\)</span>。</p>
<p>旋转可以选择为 : ‘X’ , ‘Y’ , ‘Z’, 如 <code class="docutils literal notranslate"><span class="pre">rotation</span></code> 的参数定义为:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotation='X'</span></code> 将特征用作RX旋转的角度。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotation='Y'</span></code> 将特征用作RY旋转的角度。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotation='Z'</span></code> 将特征用作RZ旋转的角度。</p></li>
</ul>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">features</span></code> 的长度必须小于或等于量子比特的数量。如果 <code class="docutils literal notranslate"><span class="pre">features</span></code> 中的长度少于量子比特,则线路不应用剩余的旋转门。</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_feat</strong> – 表示参数的numpy数组。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引。</p></li>
<li><p><strong>rotation</strong> – 使用什么旋转,默认为“X”。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子线路。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.template</span><span class="w"> </span><span class="kn">import</span> <span class="n">AngleEmbeddingCircuit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="n">input_feat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">AngleEmbeddingCircuit</span><span class="p">(</span><span class="n">input_feat</span><span class="p">,</span><span class="n">m_qlist</span><span class="p">,</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">AngleEmbeddingCircuit</span><span class="p">(</span><span class="n">input_feat</span><span class="p">,</span><span class="n">m_qlist</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">AngleEmbeddingCircuit</span><span class="p">(</span><span class="n">input_feat</span><span class="p">,</span><span class="n">m_qlist</span><span class="p">,</span><span class="s1">&#39;Z&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="iqpembeddingcircuits">
<h3>IQPEmbeddingCircuits<a class="headerlink" href="#iqpembeddingcircuits" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.IQPEmbeddingCircuits">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">IQPEmbeddingCircuits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_feat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.IQPEmbeddingCircuits" title="Link to this definition">¶</a></dt>
<dd><p>使用IQP线路的对角门将 <span class="math notranslate nohighlight">\(n\)</span> 特征编码为 <span class="math notranslate nohighlight">\(n\)</span> 量子比特。</p>
<p>编码是由 <a class="reference external" href="https://arxiv.org/pdf/1804.11326.pdf">Havlicek et al. (2018)</a> 提出。</p>
<p>通过指定 <code class="docutils literal notranslate"><span class="pre">n_repeats</span></code> ,可以重复基本IQP线路。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_feat</strong> – 表示参数的numpy数组。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引列表。</p></li>
<li><p><strong>rep</strong> – 重复量子线路块,默认次数1。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子线路。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.template</span><span class="w"> </span><span class="kn">import</span> <span class="n">IQPEmbeddingCircuits</span>
<span class="n">input_feat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">=</span> <span class="n">IQPEmbeddingCircuits</span><span class="p">(</span><span class="n">input_feat</span><span class="p">,</span><span class="n">qlist</span><span class="p">,</span><span class="n">rep</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rotcircuit">
<h3>RotCircuit<a class="headerlink" href="#rotcircuit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.RotCircuit">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">RotCircuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">para</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.RotCircuit" title="Link to this definition">¶</a></dt>
<dd><p>任意单量子比特旋转。qlist的数量应该是1,参数的数量应该是3。</p>
<div class="math notranslate nohighlight">
\[\begin{split}R(\phi,\theta,\omega) = RZ(\omega)RY(\theta)RZ(\phi)= \begin{bmatrix}
e^{-i(\phi+\omega)/2}\cos(\theta/2) &amp; -e^{i(\phi-\omega)/2}\sin(\theta/2) \\
e^{-i(\phi-\omega)/2}\sin(\theta/2) &amp; e^{i(\phi+\omega)/2}\cos(\theta/2)
\end{bmatrix}.\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>para</strong> – 表示参数  <span class="math notranslate nohighlight">\([\phi, \theta, \omega]\)</span> 的numpy数组。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引,只接受单个量子比特。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子线路。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.template</span><span class="w"> </span><span class="kn">import</span> <span class="n">RotCircuit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet</span><span class="w"> </span><span class="kn">import</span> <span class="n">tensor</span>

<span class="n">m_qlist</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">param</span> <span class="o">=</span><span class="n">tensor</span><span class="o">.</span><span class="n">QTensor</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">RotCircuit</span><span class="p">(</span><span class="n">param</span><span class="p">,</span><span class="n">m_qlist</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="crotcircuit">
<h3>CRotCircuit<a class="headerlink" href="#crotcircuit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.CRotCircuit">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">CRotCircuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">para</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_qubits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rot_qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.CRotCircuit" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>受控Rot操作符。</p>
</div></blockquote>
<div class="math notranslate nohighlight">
\[\begin{split}CR(\phi, \theta, \omega) = \begin{bmatrix}
    1 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 1 &amp; 0 &amp; 0\\
    0 &amp; 0 &amp; e^{-i(\phi+\omega)/2}\cos(\theta/2) &amp; -e^{i(\phi-\omega)/2}\sin(\theta/2)\\
    0 &amp; 0 &amp; e^{-i(\phi-\omega)/2}\sin(\theta/2) &amp; e^{i(\phi+\omega)/2}\cos(\theta/2)
\end{bmatrix}.\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>para</strong> – 表示参数  <span class="math notranslate nohighlight">\([\phi, \theta, \omega]\)</span> 的numpy数组。</p></li>
<li><p><strong>control_qubits</strong> – 量子比特索引,量子比特的数量应为1。</p></li>
<li><p><strong>rot_qubits</strong> – Rot量子比特索引,量子比特的数量应为1。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子线路。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.template</span><span class="w"> </span><span class="kn">import</span> <span class="n">CRotCircuit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">control_qlist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">param</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="n">cir</span> <span class="o">=</span> <span class="n">CRotCircuit</span><span class="p">(</span><span class="n">param</span><span class="p">,</span><span class="n">control_qlist</span><span class="p">,</span><span class="n">m_qlist</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="cswapcircuit">
<h3>CSWAPcircuit<a class="headerlink" href="#cswapcircuit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.CSWAPcircuit">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">CSWAPcircuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.CSWAPcircuit" title="Link to this definition">¶</a></dt>
<dd><p>受控SWAP线路。</p>
<div class="math notranslate nohighlight">
\[\begin{split}CSWAP = \begin{bmatrix}
    1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}.\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>提供的第一个量子比特对应于 <strong>control qubit</strong> 。</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>qubits</strong> – 量子比特索引列表第一个量子比特是控制量子比特。qlist的长度必须为3。</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>量子线路。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">CSWAPcircuit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="n">m_machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">c</span> <span class="o">=</span><span class="n">CSWAPcircuit</span><span class="p">([</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="controlled-hadamard">
<h3>Controlled_Hadamard<a class="headerlink" href="#controlled-hadamard" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.Controlled_Hadamard">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">Controlled_Hadamard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.Controlled_Hadamard" title="Link to this definition">¶</a></dt>
<dd><p>受控Hadamard逻辑门</p>
<div class="math notranslate nohighlight">
\[\begin{split}CH = \begin{bmatrix}
    1 &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; 1 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; \frac{1}{\sqrt{2}} &amp; \frac{1}{\sqrt{2}} \\
    0 &amp; 0 &amp; \frac{1}{\sqrt{2}} &amp; -\frac{1}{\sqrt{2}}
\end{bmatrix}.\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>qubits</strong> – 量子比特索引。</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qubits</span> <span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">Controlled_Hadamard</span>

<span class="n">cir</span> <span class="o">=</span> <span class="n">Controlled_Hadamard</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ccz">
<h3>CCZ<a class="headerlink" href="#ccz" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.CCZ">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">CCZ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.CCZ" title="Link to this definition">¶</a></dt>
<dd><p>受控-受控-Z (controlled-controlled-Z) 逻辑门。</p>
<div class="math notranslate nohighlight">
\[\begin{split}CCZ =
\begin{pmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; -1
\end{pmatrix}\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>qubits</strong> – 量子比特索引。</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pyqpanda QCircuit</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">CCZ</span>

<span class="n">cir</span> <span class="o">=</span> <span class="n">CCZ</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="fermionicsingleexcitation">
<h3>FermionicSingleExcitation<a class="headerlink" href="#fermionicsingleexcitation" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.FermionicSingleExcitation">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">FermionicSingleExcitation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.FermionicSingleExcitation" title="Link to this definition">¶</a></dt>
<dd><p>对泡利矩阵的张量积求幂的耦合簇单激励算子。矩阵形式下式给出:</p>
<div class="math notranslate nohighlight">
\[\hat{U}_{pr}(\theta) = \mathrm{exp} \{ \theta_{pr} (\hat{c}_p^\dagger \hat{c}_r
-\mathrm{H.c.}) \},\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weight</strong> – 量子比特 p 上的变参.</p></li>
<li><p><strong>wires</strong> – 表示区间[r, p]中的量子比特索引子集。最小长度必须为2。第一索引值被解释为r,最后一个索引值被解释为p。
中间的索引被CNOT门作用,以计算量子位集的奇偶校验。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pyqpanda QCircuit</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">FermionicSingleExcitation</span><span class="p">,</span> <span class="n">expval</span>

<span class="n">weight</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qlists</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">cir</span> <span class="o">=</span> <span class="n">FermionicSingleExcitation</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">qlists</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="fermionicdoubleexcitation">
<h3>FermionicDoubleExcitation<a class="headerlink" href="#fermionicdoubleexcitation" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.FermionicDoubleExcitation">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">FermionicDoubleExcitation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wires1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wires2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.FermionicDoubleExcitation" title="Link to this definition">¶</a></dt>
<dd><p>对泡利矩阵的张量积求幂的耦合聚类双激励算子,矩阵形式由下式给出:</p>
<div class="math notranslate nohighlight">
\[\hat{U}_{pqrs}(\theta) = \mathrm{exp} \{ \theta (\hat{c}_p^\dagger \hat{c}_q^\dagger
\hat{c}_r \hat{c}_s - \mathrm{H.c.}) \},\]</div>
<p>其中 <span class="math notranslate nohighlight">\(\hat{c}\)</span> 和 <span class="math notranslate nohighlight">\(\hat{c}^\dagger\)</span> 是费米子湮灭和
创建运算符和索引 <span class="math notranslate nohighlight">\(r, s\)</span> 和 <span class="math notranslate nohighlight">\(p, q\)</span> 在占用的和
分别为空分子轨道。 使用 <a class="reference external" href="https://arxiv.org/abs/1208.5986">Jordan-Wigner 变换</a> 上面定义的费米子算子可以写成
根据 Pauli 矩阵(有关更多详细信息,请参见
<a class="reference external" href="https://arxiv.org/abs/1805.04340">arXiv:1805.04340</a>)</p>
<div class="math notranslate nohighlight">
\[\begin{split}\hat{U}_{pqrs}(\theta) = \mathrm{exp} \Big\{
\frac{i\theta}{8} \bigotimes_{b=s+1}^{r-1} \hat{Z}_b \bigotimes_{a=q+1}^{p-1}
\hat{Z}_a (\hat{X}_s \hat{X}_r \hat{Y}_q \hat{X}_p +
\hat{Y}_s \hat{X}_r \hat{Y}_q \hat{Y}_p +\\ \hat{X}_s \hat{Y}_r \hat{Y}_q \hat{Y}_p +
\hat{X}_s \hat{X}_r \hat{X}_q \hat{Y}_p - \mathrm{H.c.}  ) \Big\}\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weight</strong> – 可变参数</p></li>
<li><p><strong>wires1</strong> – 代表的量子比特的索引列表区间 [s, r] 中占据量子比特的子集。第一个索引被解释为 s,最后一索引被解释为 r。 CNOT 门对中间的索引进行操作,以计算一组量子位的奇偶性。</p></li>
<li><p><strong>wires2</strong> – 代表的量子比特的索引列表区间 [q, p] 中占据量子比特的子集。第一根索引被解释为 q,最后一索引被解释为 p。 CNOT 门对中间的索引进行操作,以计算一组量子位的奇偶性。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pyqpanda QCircuit</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">FermionicDoubleExcitation</span><span class="p">,</span> <span class="n">expval</span>
<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qlists</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">weight</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">cir</span> <span class="o">=</span> <span class="n">FermionicDoubleExcitation</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span>
                                <span class="n">wires1</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                                <span class="n">wires2</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
                                <span class="n">qubits</span><span class="o">=</span><span class="n">qlists</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="uccsd">
<h3>UCCSD<a class="headerlink" href="#uccsd" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.UCCSD">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">UCCSD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_wires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_wires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.UCCSD" title="Link to this definition">¶</a></dt>
<dd><p>实现酉耦合簇单激发和双激发拟设(UCCSD)。UCCSD 是 VQE 拟设,通常用于运行量子化学模拟。</p>
<p>在一阶 Trotter 近似内,UCCSD 酉函数由下式给出:</p>
<div class="math notranslate nohighlight">
\[\hat{U}(\vec{\theta}) =
\prod_{p &gt; r} \mathrm{exp} \Big\{\theta_{pr}
(\hat{c}_p^\dagger \hat{c}_r-\mathrm{H.c.}) \Big\}
\prod_{p &gt; q &gt; r &gt; s} \mathrm{exp} \Big\{\theta_{pqrs}
(\hat{c}_p^\dagger \hat{c}_q^\dagger \hat{c}_r \hat{c}_s-\mathrm{H.c.}) \Big\}\]</div>
<p>其中 <span class="math notranslate nohighlight">\(\hat{c}\)</span> 和 <span class="math notranslate nohighlight">\(\hat{c}^\dagger\)</span> 是费米子湮灭和
创建运算符和索引 <span class="math notranslate nohighlight">\(r, s\)</span> 和 <span class="math notranslate nohighlight">\(p, q\)</span> 在占用的和
分别为空分子轨道。(更多细节见
<a class="reference external" href="https://arxiv.org/abs/1805.04340">arXiv:1805.04340</a>):</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> – 包含参数的大小 <code class="docutils literal notranslate"><span class="pre">(len(s_wires)+</span> <span class="pre">len(d_wires))</span></code> 张量
<span class="math notranslate nohighlight">\(\theta_{pr}\)</span> 和 <span class="math notranslate nohighlight">\(\theta_{pqrs}\)</span> 输入 Z 旋转
<code class="docutils literal notranslate"><span class="pre">FermionicSingleExcitation</span></code> 和 <code class="docutils literal notranslate"><span class="pre">FermionicDoubleExcitation</span></code> 。</p></li>
<li><p><strong>wires</strong> – 模板作用的量子比特索引</p></li>
<li><p><strong>s_wires</strong> – 包含量子比特索引的列表序列 <code class="docutils literal notranslate"><span class="pre">[r,...,p]</span></code>
由单一激发产生
<span class="math notranslate nohighlight">\(\vert r, p \rangle = \hat{c}_p^\dagger \hat{c}_r \vert \mathrm{HF} \rangle\)</span>,
其中 <span class="math notranslate nohighlight">\(\vert \mathrm{HF} \rangle\)</span> 表示 Hartee-Fock 参考态。</p></li>
<li><p><strong>d_wires</strong> – 列表序列,每个列表包含两个列表
指定索引 <code class="docutils literal notranslate"><span class="pre">[s,</span> <span class="pre">...,r]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">[q,...,</span> <span class="pre">p]</span></code>
定义双激励 <span class="math notranslate nohighlight">\(\vert s, r, q, p \rangle = \hat{c}_p^\dagger \hat{c}_q^\dagger \hat{c}_r\hat{c}_s \vert \mathrm{HF} \rangle\)</span> 。</p></li>
<li><p><strong>init_state</strong> – 长度 <code class="docutils literal notranslate"><span class="pre">len(wires)</span></code> occupation-number vector 表示
高频状态。 <code class="docutils literal notranslate"><span class="pre">init_state</span></code> 在量子比特初始化状态。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引。</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">tensor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">UCCSD</span><span class="p">,</span> <span class="n">expval</span>
<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qlists</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">weight</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">8</span><span class="p">])</span>
<span class="n">cir</span> <span class="o">=</span> <span class="n">UCCSD</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span><span class="n">wires</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span>
                                <span class="n">s_wires</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
                                <span class="n">d_wires</span><span class="o">=</span><span class="p">[[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]],</span>
                                <span class="n">init_state</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                <span class="n">qubits</span><span class="o">=</span><span class="n">qlists</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="quantumpoolingcircuit">
<h3>QuantumPoolingCircuit<a class="headerlink" href="#quantumpoolingcircuit" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.QuantumPoolingCircuit">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">QuantumPoolingCircuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources_wires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sinks_wires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.QuantumPoolingCircuit" title="Link to this definition">¶</a></dt>
<dd><p>对数据进行降采样的量子电路。</p>
<p>为了减少电路中的量子位数量,首先在系统中创建成对的量子位。在最初配对所有量子位之后,将广义2量子位酉元应用于每一对量子位上。并在应用这两个量子位酉元之后,在神经网络的其余部分忽略每对量子位中的一个量子位。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sources_wires</strong> – 将被忽略的源量子位索引。</p></li>
<li><p><strong>sinks_wires</strong> – 将保留的目标量子位索引。</p></li>
<li><p><strong>params</strong> – 输入参数。</p></li>
<li><p><strong>qubits</strong> – 量子比特索引。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pyqpanda QCircuit</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.template</span><span class="w"> </span><span class="kn">import</span> <span class="n">QuantumPoolingCircuit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet</span><span class="w"> </span><span class="kn">import</span> <span class="n">tensor</span>

<span class="n">qlists</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">full</span><span class="p">([</span><span class="mi">6</span><span class="p">],</span> <span class="mf">0.35</span><span class="p">)</span>
<span class="n">cir</span> <span class="o">=</span> <span class="n">QuantumPoolingCircuit</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">p</span><span class="p">,</span> <span class="n">qlists</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="id7">
<h2>常用量子线路组合<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h2>
<p>VQNet提供了量子机器学习研究中常用的一些量子线路</p>
<section id="hardwareefficientansatz">
<h3>HardwareEfficientAnsatz<a class="headerlink" href="#hardwareefficientansatz" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.ansatz.HardwareEfficientAnsatz">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.ansatz.</span></span><span class="sig-name descname"><span class="pre">HardwareEfficientAnsatz</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_rot_gate_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entangle_gate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'CNOT'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entangle_rules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.ansatz.HardwareEfficientAnsatz" title="Link to this definition">¶</a></dt>
<dd><p>论文介绍的Hardware Efficient Ansatz的实现: <a class="reference external" href="https://arxiv.org/pdf/1704.05018.pdf">Hardware-efficient Variational Quantum Eigensolver for Small Molecules</a> 。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qubits</strong> – 量子比特索引。</p></li>
<li><p><strong>single_rot_gate_list</strong> – 单个量子位旋转门列表由一个或多个作用于每个量子位的旋转门构成。目前支持 Rx、Ry、Rz。</p></li>
<li><p><strong>entangle_gate</strong> – 非参数化纠缠门。支持CNOT、CZ。默认: CNOT。</p></li>
<li><p><strong>entangle_rules</strong> – 电路中如何使用纠缠门。 <code class="docutils literal notranslate"><span class="pre">linear</span></code> 意味着纠缠门将作用于每个相邻的量子位。 <code class="docutils literal notranslate"><span class="pre">all</span></code> 意味着纠缠门将作用于任何两个 qbuits。 默认值:<code class="docutils literal notranslate"><span class="pre">linear</span></code>。</p></li>
<li><p><strong>depth</strong> – ansatz 的深度,默认:1。</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">QTensor</span><span class="p">,</span><span class="n">tensor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.ansatz</span><span class="w"> </span><span class="kn">import</span> <span class="n">HardwareEfficientAnsatz</span>
<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">HardwareEfficientAnsatz</span><span class="p">(</span><span class="n">qlist</span><span class="p">,[</span><span class="s2">&quot;rx&quot;</span><span class="p">,</span> <span class="s2">&quot;RY&quot;</span><span class="p">,</span> <span class="s2">&quot;rz&quot;</span><span class="p">],</span>
                        <span class="n">entangle_gate</span><span class="o">=</span><span class="s2">&quot;cnot&quot;</span><span class="p">,</span>
                        <span class="n">entangle_rules</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
                        <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">get_para_num</span><span class="p">()])</span>

<span class="n">cir</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">create_ansatz</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="basicentanglertemplate">
<h3>BasicEntanglerTemplate<a class="headerlink" href="#basicentanglertemplate" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.BasicEntanglerTemplate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">BasicEntanglerTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_qubits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">pyqpanda.RX</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.BasicEntanglerTemplate" title="Link to this definition">¶</a></dt>
<dd><p>由每个量子位上的单参数单量子位旋转组成的层,后跟一个闭合链或环组合的多个CNOT 门。</p>
<p>CNOT 门环将每个量子位与其邻居连接起来,最后一个量子位被认为是第一个量子位的邻居。</p>
<p>层数 <span class="math notranslate nohighlight">\(L\)</span> 由参数 <code class="docutils literal notranslate"><span class="pre">weights</span></code> 的第一个维度决定。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> – 形状的权重张量 <cite>(L, len(qubits))</cite>。 每个权重都用作量子含参门中的参数。默认值为: <code class="docutils literal notranslate"><span class="pre">None</span></code> ,则使用 <cite>(1,1)</cite> 正态分布随机数作为权重。</p></li>
<li><p><strong>num_qubits</strong> – 量子比特数,默认为1。</p></li>
<li><p><strong>rotation</strong> – 使用单参数单量子比特门,``pyqpanda.RX`` 被用作默认值。</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">BasicEntanglerTemplate</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">num_qubits</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">shape</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_qubits</span><span class="p">]</span>
<span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">)</span>

<span class="n">circuit</span> <span class="o">=</span> <span class="n">BasicEntanglerTemplate</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">num_qubits</span><span class="o">=</span><span class="n">num_qubits</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">circuit</span><span class="o">.</span><span class="n">compute_circuit</span><span class="p">()</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">print_circuit</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="stronglyentanglingtemplate">
<h3>StronglyEntanglingTemplate<a class="headerlink" href="#stronglyentanglingtemplate" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.template.StronglyEntanglingTemplate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.template.</span></span><span class="sig-name descname"><span class="pre">StronglyEntanglingTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_qubits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.template.StronglyEntanglingTemplate" title="Link to this definition">¶</a></dt>
<dd><p>由单个量子比特旋转和纠缠器组成的层,参考 <a class="reference external" href="https://arxiv.org/abs/1804.00633">circuit-centric classifier design</a> .</p>
<p>参数 <code class="docutils literal notranslate"><span class="pre">weights</span></code> 包含每一层的权重。 因此得出层数 <span class="math notranslate nohighlight">\(L\)</span> 等于 <code class="docutils literal notranslate"><span class="pre">weights</span></code> 的第一个维度。</p>
<p>其包含2-qubit CNOT 门,作用于 <span class="math notranslate nohighlight">\(M\)</span> 个量子比特上,:math:<cite>i = 1,…,M</cite>。 每个门的第二个量子位标号由公式 <span class="math notranslate nohighlight">\((i+r)\mod M\)</span> 给出,其中 <span class="math notranslate nohighlight">\(r\)</span> 是一个称为 <code class="docutils literal notranslate"><span class="pre">range</span></code>  的超参数,并且 <span class="math notranslate nohighlight">\(0 &lt; r &lt; M\)</span>。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> – 形状为 <code class="docutils literal notranslate"><span class="pre">(L,</span> <span class="pre">M,</span> <span class="pre">3)</span></code> 的权重张量,默认值:None,使用形状为 <code class="docutils literal notranslate"><span class="pre">(1,1,3)</span></code> 的随机张量。</p></li>
<li><p><strong>num_qubits</strong> – 量子比特数,默认值:1。</p></li>
<li><p><strong>ranges</strong> – 确定每个后续层的范围超参数的序列； 默认值:None,使用 <span class="math notranslate nohighlight">\(r=l \ mod M\)</span> 作为ranges 的值。</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">StronglyEntanglingTemplate</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">num_qubits</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">shape</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_qubits</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">)</span>

<span class="n">circuit</span> <span class="o">=</span> <span class="n">StronglyEntanglingTemplate</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">num_qubits</span><span class="o">=</span><span class="n">num_qubits</span> <span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">circuit</span><span class="o">.</span><span class="n">compute_circuit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">print_circuit</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="complexentangelingtemplate">
<h3>ComplexEntangelingTemplate<a class="headerlink" href="#complexentangelingtemplate" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.ComplexEntangelingTemplate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.</span></span><span class="sig-name descname"><span class="pre">ComplexEntangelingTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_qubits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.ComplexEntangelingTemplate" title="Link to this definition">¶</a></dt>
<dd><p>由 U3 门和 CNOT 门组成的强纠缠层。
此线路模板来自以下论文:<a class="reference external" href="https://arxiv.org/abs/1804.00633">https://arxiv.org/abs/1804.00633</a>。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> – 参数,[depth,num_qubits,3]的形状</p></li>
<li><p><strong>num_qubits</strong> – 量子比特数。</p></li>
<li><p><strong>depth</strong> – 子电路的深度。</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">ComplexEntangelingTemplate</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">depth</span> <span class="o">=</span><span class="mi">3</span>
<span class="n">num_qubits</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">shape</span> <span class="o">=</span> <span class="p">[</span><span class="n">depth</span><span class="p">,</span> <span class="n">num_qubits</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">weights</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">)</span>

<span class="n">circuit</span> <span class="o">=</span> <span class="n">ComplexEntangelingTemplate</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="n">num_qubits</span><span class="o">=</span><span class="n">num_qubits</span><span class="p">,</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">circuit</span><span class="o">.</span><span class="n">create_circuit</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">print_circuit</span><span class="p">(</span><span class="n">qubits</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="quantum-embedding">
<h3>Quantum_Embedding<a class="headerlink" href="#quantum-embedding" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.Quantum_Embedding">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.</span></span><span class="sig-name descname"><span class="pre">Quantum_Embedding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">qubits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_repetitions_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_unitary_layers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_repetitions</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.Quantum_Embedding" title="Link to this definition">¶</a></dt>
<dd><p>使用 RZ,RY,RZ 创建变分量子电路,将经典数据编码为量子态。
参考 <a class="reference external" href="https://arxiv.org/abs/2001.03622">Quantum embeddings for machine learning</a>。
在初始化该类后,其成员函数 <code class="docutils literal notranslate"><span class="pre">compute_circuit</span></code> 为运行函数,可作为参数输入 <code class="docutils literal notranslate"><span class="pre">QuantumLayerV2</span></code> 类构成量子机器学习模型的一层。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>qubits</strong> – 使用pyqpanda 申请的量子比特。</p></li>
<li><p><strong>machine</strong> – 使用pyqpanda 申请的量子虚拟机。</p></li>
<li><p><strong>num_repetitions_input</strong> – 在子模块中对输入进行编码的重复次数。</p></li>
<li><p><strong>depth_input</strong> – 输入数据的特征维度。</p></li>
<li><p><strong>num_unitary_layers</strong> – 每个子模块中变分量子门的重复次数。</p></li>
<li><p><strong>num_repetitions</strong> – 子模块的重复次数。</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3</span><span class="w"> </span><span class="kn">import</span> <span class="n">QuantumLayerV2</span><span class="p">,</span><span class="n">Quantum_Embedding</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.tensor</span><span class="w"> </span><span class="kn">import</span> <span class="n">tensor</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="n">depth_input</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">num_repetitions</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">num_repetitions_input</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">num_unitary_layers</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">loacl_machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">nq</span> <span class="o">=</span> <span class="n">depth_input</span> <span class="o">*</span> <span class="n">num_repetitions_input</span>
<span class="n">qubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">nq</span><span class="p">)</span>
<span class="n">cubits</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">nq</span><span class="p">)</span>

<span class="n">data_in</span> <span class="o">=</span> <span class="n">tensor</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">12</span><span class="p">,</span> <span class="n">depth_input</span><span class="p">])</span>
<span class="n">data_in</span><span class="o">.</span><span class="n">requires_grad</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">qe</span> <span class="o">=</span> <span class="n">Quantum_Embedding</span><span class="p">(</span><span class="n">nq</span><span class="p">,</span> <span class="n">loacl_machine</span><span class="p">,</span> <span class="n">num_repetitions_input</span><span class="p">,</span>
                    <span class="n">depth_input</span><span class="p">,</span> <span class="n">num_unitary_layers</span><span class="p">,</span> <span class="n">num_repetitions</span><span class="p">)</span>
<span class="n">qlayer</span> <span class="o">=</span> <span class="n">QuantumLayerV2</span><span class="p">(</span><span class="n">qe</span><span class="o">.</span><span class="n">compute_circuit</span><span class="p">,</span>
                        <span class="n">qe</span><span class="o">.</span><span class="n">param_num</span><span class="p">)</span>

<span class="n">data_in</span><span class="o">.</span><span class="n">requires_grad</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">qlayer</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
<span class="n">y</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_in</span><span class="o">.</span><span class="n">grad</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="id8">
<h2>对量子线路进行测量<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h2>
<section id="expval">
<h3>expval<a class="headerlink" href="#expval" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.expval">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">expval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauli_str_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.expval" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>提供的哈密顿量观测值的期望值。</p>
</div></blockquote>
<p>如果观测值是 <span class="math notranslate nohighlight">\(0.7Z\otimes X\otimes I+0.2I\otimes Z\otimes I\)</span>,
那么 Hamiltonian dict 将是 <code class="docutils literal notranslate"><span class="pre">{{'Z0,</span> <span class="pre">X1':0.7}</span> <span class="pre">,{'Z1':0.2}}</span></code> 。</p>
<p>expval api现在支持pyQPanda3 的模拟器 。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>machine</strong> – 由pyQPanda创建的量子虚拟机。</p></li>
<li><p><strong>prog</strong> – pyQPanda创建的量子工程。</p></li>
<li><p><strong>pauli_str_dict</strong> – 哈密顿量观测值。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>期望值。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">expval</span>
<span class="nb">input</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.56</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]</span>
<span class="n">m_machine</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">m_qlist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">cir</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RZ</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">RY</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">input</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">cir</span><span class="o">&lt;&lt;</span><span class="n">pq</span><span class="o">.</span><span class="n">CNOT</span><span class="p">(</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">m_qlist</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">m_prog</span> <span class="o">=</span> <span class="n">pq</span><span class="o">.</span><span class="n">QProg</span><span class="p">(</span><span class="n">cir</span><span class="p">)</span>

<span class="n">pauli_dict</span>  <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Z0 X1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;Y2&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">0.543</span><span class="p">}</span>
<span class="n">exp2</span> <span class="o">=</span> <span class="n">expval</span><span class="p">(</span><span class="n">m_machine</span><span class="p">,</span><span class="n">m_prog</span><span class="p">,</span><span class="n">pauli_dict</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">exp2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="quantummeasure">
<h3>QuantumMeasure<a class="headerlink" href="#quantummeasure" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.QuantumMeasure">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">QuantumMeasure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measure_qubits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qcloud_option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.QuantumMeasure" title="Link to this definition">¶</a></dt>
<dd><p>计算量子线路测量。返回通过蒙特卡罗方法获得的测量结果。</p>
<p>更多详情请访问  <a class="reference external" href="https://pyqpanda-toturial.readthedocs.io/zh/latest/Measure.html?highlight=measure_all">https://pyqpanda-toturial.readthedocs.io/zh/latest/Measure.html?highlight=measure_all</a> 。</p>
<p>QuantumMeasure api现在只支持QPanda <code class="docutils literal notranslate"><span class="pre">CPUQVM</span></code> 或 <code class="docutils literal notranslate"><span class="pre">QCloud</span></code> 。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>machine</strong> – pyQPanda分配的量子虚拟机。</p></li>
<li><p><strong>prog</strong> – pyQPanda创建的量子工程。</p></li>
<li><p><strong>measure_qubits</strong> – 列表包含测量比特索引。</p></li>
<li><p><strong>shots</strong> – 测量次数,默认值为1000次。</p></li>
<li><p><strong>qcloud_option</strong> – 设置 qcloud 配置,默认为“”,可以传入一个QCloudOptions类,只在使用qcloud 下有用。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>返回通过蒙特卡罗方法获得的测量结果。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="n">circuit</span> <span class="o">=</span> <span class="n">QCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

<span class="n">prog</span> <span class="o">=</span> <span class="n">QProg</span><span class="p">()</span>
<span class="n">prog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">CPUQVM</span><span class="p">()</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">probs_measure</span><span class="p">,</span><span class="n">quantum_measure</span>

<span class="n">measure_result</span> <span class="o">=</span> <span class="n">quantum_measure</span><span class="p">(</span><span class="n">machine</span><span class="p">,</span><span class="n">prog</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">measure_result</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="probsmeasure">
<h3>ProbsMeasure<a class="headerlink" href="#probsmeasure" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.ProbsMeasure">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">ProbsMeasure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measure_qubits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.ProbsMeasure" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>计算线路概率测量。</p>
</div></blockquote>
<p>更多详情请访问 <a class="reference external" href="https://pyqpanda-toturial.readthedocs.io/zh/latest/PMeasure.html">https://pyqpanda-toturial.readthedocs.io/zh/latest/PMeasure.html</a>。</p>
<p>ProbsMeasure api现在只支持pyQPanda <code class="docutils literal notranslate"><span class="pre">CPUQVM</span></code> 或 <code class="docutils literal notranslate"><span class="pre">QCloud</span></code> 。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>measure_qubits</strong> – 列表包含测量比特索引</p></li>
<li><p><strong>prog</strong> – qpanda创建的量子工程。</p></li>
<li><p><strong>machine</strong> – pyQPanda分配的量子虚拟机。</p></li>
<li><p><strong>shots</strong> – 测量次数,默认为1,计算理论值。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>按字典顺序测量量子比特。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyqpanda3.core</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">probs_measure</span>
<span class="n">circuit</span> <span class="o">=</span> <span class="n">QCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">H</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">P</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">)</span>
<span class="n">circuit</span> <span class="o">&lt;&lt;</span> <span class="n">RX</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

<span class="n">prog</span> <span class="o">=</span> <span class="n">QProg</span><span class="p">()</span>
<span class="n">prog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
<span class="n">prog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">measure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">prog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">measure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">prog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">measure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">machine</span> <span class="o">=</span> <span class="n">CPUQVM</span><span class="p">()</span>

<span class="n">measure_result</span> <span class="o">=</span> <span class="n">probs_measure</span><span class="p">(</span><span class="n">machine</span><span class="p">,</span><span class="n">prog</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">measure_result</span><span class="p">)</span>
<span class="c1">#[0.04796392899146941, 0, 0.4760180355042653, 0.4760180355042653]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="densitymatrixfromqstate">
<h3>DensityMatrixFromQstate<a class="headerlink" href="#densitymatrixfromqstate" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.DensityMatrixFromQstate">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">DensityMatrixFromQstate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.DensityMatrixFromQstate" title="Link to this definition">¶</a></dt>
<dd><p>计算量子态在一组特定量子比特上的密度矩阵。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – 一维列表状态向量。 这个列表的大小应该是 <code class="docutils literal notranslate"><span class="pre">(2**N,)</span></code> 对于量子比特个数 <code class="docutils literal notranslate"><span class="pre">N</span></code> ,qstate 应该从 000 -&gt;111 开始。</p></li>
<li><p><strong>indices</strong> – 所考虑子系统中的量子比特索引列表。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>大小为“(2**len(indices), 2**len(indices))”的密度矩阵。</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">DensityMatrixFromQstate</span>
<span class="n">qstate</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.9306699299765968</span><span class="o">+</span><span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.18865613455240968</span><span class="o">+</span><span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1886561345524097</span><span class="o">+</span><span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.03824249173404786</span><span class="o">+</span><span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.048171819846746615</span><span class="n">j</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00976491131165138</span><span class="n">j</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.23763904794287155</span><span class="n">j</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.048171819846746615</span><span class="n">j</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">DensityMatrixFromQstate</span><span class="p">(</span><span class="n">qstate</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]))</span>
<span class="c1"># [[0.86846704+0.j 0.1870241 +0.j 0.17604699+0.j 0.03791166+0.j]</span>
<span class="c1">#  [0.1870241 +0.j 0.09206345+0.j 0.03791166+0.j 0.01866219+0.j]</span>
<span class="c1">#  [0.17604699+0.j 0.03791166+0.j 0.03568649+0.j 0.00768507+0.j]</span>
<span class="c1">#  [0.03791166+0.j 0.01866219+0.j 0.00768507+0.j 0.00378301+0.j]]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="vn-entropy">
<h3>VN_Entropy<a class="headerlink" href="#vn-entropy" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.VN_Entropy">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">VN_Entropy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.VN_Entropy" title="Link to this definition">¶</a></dt>
<dd><p>根据给定 qubits 列表上的状态向量计算Von Neumann熵 。</p>
<div class="math notranslate nohighlight">
\[S( \rho ) = -\text{Tr}( \rho \log ( \rho ))\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – 一维列表状态向量。 这个列表的大小应该是 <code class="docutils literal notranslate"><span class="pre">(2**N,)</span></code> 对于量子比特个数 <code class="docutils literal notranslate"><span class="pre">N</span></code> ,qstate 应该从 000 -&gt;111 开始。</p></li>
<li><p><strong>indices</strong> – 所考虑子系统中的量子比特索引列表。</p></li>
<li><p><strong>base</strong> – 对数的底。 如果没有,则使用自然对数。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>冯诺依曼熵的浮点值.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">VN_Entropy</span>
<span class="n">qstate</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.9022961387408862</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.06676534788028633</span><span class="n">j</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">0.18290448232350312</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.3293638014158896</span><span class="n">j</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">0.03707657410649268</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.06676534788028635</span><span class="n">j</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">0.18290448232350312</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.013534006039561714</span><span class="n">j</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">VN_Entropy</span><span class="p">(</span><span class="n">qstate</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
<span class="c1">#0.14592917648464448</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="mutal-info">
<h3>Mutal_Info<a class="headerlink" href="#mutal-info" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.Mutal_Info">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">Mutal_Info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.Mutal_Info" title="Link to this definition">¶</a></dt>
<dd><p>根据给定两个子 qubits 列表上的状态向量计算互信息 。</p>
<div class="math notranslate nohighlight">
\[I(A, B) = S(\rho^A) + S(\rho^B) - S(\rho^{AB})\]</div>
<p>其中 <span class="math notranslate nohighlight">\(S\)</span> 是冯诺依曼熵。</p>
<p>互信息是衡量两个子系统之间相关性的指标。更具体地说,它量化了一个系统通过测量另一个系统获得的信息量。</p>
<p>每个状态都可以作为计算基础中的状态向量给出。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – 一维列表状态向量。 这个列表的大小应该是 <code class="docutils literal notranslate"><span class="pre">(2**N,)</span></code> 对于量子比特个数 <code class="docutils literal notranslate"><span class="pre">N</span></code> , qstate 应该从 000 -&gt;111 开始。</p></li>
<li><p><strong>indices0</strong> – 第一个子系统中的量子比特索引列表。</p></li>
<li><p><strong>indices1</strong> – 第二个子系统中的量子比特索引列表。</p></li>
<li><p><strong>base</strong> – 对数的底。 如果为None,则使用自然对数,默认为None。</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>子系统之间的相互信息</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.pq3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mutal_Info</span>
<span class="n">qstate</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.9022961387408862</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.06676534788028633</span><span class="n">j</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">0.18290448232350312</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.3293638014158896</span><span class="n">j</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">0.03707657410649268</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.06676534788028635</span><span class="n">j</span><span class="p">,</span>
        <span class="p">(</span><span class="mf">0.18290448232350312</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="o">-</span><span class="mf">0.013534006039561714</span><span class="n">j</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Mutal_Info</span><span class="p">(</span><span class="n">qstate</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">#0.13763425302805887</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="purity">
<h3>Purity<a class="headerlink" href="#purity" title="Link to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyvqnet.qnn.pq3.measure.Purity">
<span class="sig-prename descclassname"><span class="pre">pyvqnet.qnn.pq3.measure.</span></span><span class="sig-name descname"><span class="pre">Purity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qubits_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyvqnet.qnn.pq3.measure.Purity" title="Link to this definition">¶</a></dt>
<dd><p>从态矢中计算特定量子比特上的纯度。</p>
<div class="math notranslate nohighlight">
\[\gamma = \text{Tr}(\rho^2)\]</div>
<p>式中 <span class="math notranslate nohighlight">\(\rho\)</span> 为密度矩阵。标准化量子态的纯度满足 <span class="math notranslate nohighlight">\(\frac{1}{d} \leq \gamma \leq 1\)</span> ,
其中 <span class="math notranslate nohighlight">\(d\)</span> 是希尔伯特空间的维数。
纯态的纯度是1。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – 从pyqpanda get_qstate()获取的量子态</p></li>
<li><p><strong>qubits_idx</strong> – 要计算纯度的量子比特位索引</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>纯度</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyvqnet.qnn.qp3.measure</span><span class="w"> </span><span class="kn">import</span> <span class="n">Purity</span>
<span class="n">qstate</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.9306699299765968</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.18865613455240968</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.1886561345524097</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.03824249173404786</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">),</span>
        <span class="o">-</span><span class="mf">0.048171819846746615</span><span class="n">j</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00976491131165138</span><span class="n">j</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.23763904794287155</span><span class="n">j</span><span class="p">,</span>
        <span class="o">-</span><span class="mf">0.048171819846746615</span><span class="n">j</span><span class="p">]</span>
<span class="n">pp</span> <span class="o">=</span> <span class="n">Purity</span><span class="p">(</span><span class="n">qstate</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
<span class="c1">#0.902503479761881</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="qnn.html" class="btn btn-neutral float-left" title="使用pyQPanda2量子机器学习模块" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vqc.html" class="btn btn-neutral float-right" title="变分量子线路自动微分模拟" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Original Quantum.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>